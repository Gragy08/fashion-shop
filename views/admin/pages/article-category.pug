extends ../layouts/default.pug
include ../mixins/pagination.pug
include ../mixins/form-search.pug

block main
  if permissions.includes('article-category')
    .row
      .col-12
        .card
          .card-header
            .row.align-items-center
              .col
                h4.card-title #{pageTitle}
              // end col
              .col-auto
                if permissions.includes('article-category-trash')
                  a.btn.btn-danger.me-1(
                    href=`/${pathAdmin}/article/category/trash`
                    )
                    i.las.la-trash-alt.me-1
                    | Thùng rác
                if permissions.includes('article-category-create')
                  a.btn.btn-primary(
                    href=`/${pathAdmin}/article/category/create`
                    )
                    i.fa-solid.fa-plus.me-1
                    | Tạo danh mục
            // end row
          // end card-header
          .card-body.pt-0
            .row
              .col-lg-6
                //- form.input-group.mb-3(form-search)
                //-   input.form-control(
                //-     placeholder="Từ khóa..."
                //-     type="text"
                //-     name="keyword"
                //-     )
                //-   button.btn.btn-secondary Tìm kiếm
                +form-search()
            //- Table
            .table-responsive
              table.table.table-striped.mb-0
                thead.table-light
                  tr
                    th STT
                    th Avatar
                    th Tên danh mục
                    th Danh mục cha
                    th Trạng thái
                    th Lượt xem
                    th.text-end Hành động
                tbody
                  if(recordList.length > 0)
                    each item, index in recordList
                      tr
                        //- td #{index + 1}
                        td #{pagination.skip + index + 1}
                        td
                          if(item.avatar)
                            img(
                              src=`${domainCDN}${item.avatar}`
                              class="rounded thumb-md me-1 d-inline"
                            )
                        td #{item.name}
                        td #{item.parentName}
                        td
                          if (item.status == "active")
                            span.badge.bg-success Hoạt động
                          else if (item.status == "inactive")
                            span.badge.bg-danger Tạm dừng
                        td #{item.view}
                        td.text-end
                          if permissions.includes('article-category-edit')
                            a(href=`/${pathAdmin}/article/category/edit/${item.id}`)
                              i.las.la-pen.text-secondary.fs-4.text-info
                          if permissions.includes('article-category-delete')
                            a(
                              href="javascript:;"
                              button-api
                              data-method="PATCH"
                              data-api=`/${pathAdmin}/article/category/delete/${item.id}`
                              )
                              i.las.la-trash-alt.text-secondary.fs-4.text-danger
                  else
                    tr
                      td(colspan="6" class="text-center") Không tìm thấy dữ liệu
            +pagination()      
      // end col